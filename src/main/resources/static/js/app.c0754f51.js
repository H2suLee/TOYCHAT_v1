(function(){"use strict";var e={4464:function(e,t,n){n.d(t,{gh:function(){return l},z:function(){return s}});n(4603),n(7566),n(8721);var o=n(3173),a=n(144),i=n(6768);function l(){let e="https:"===window.location.protocol?"wss":"ws",t=o.A.defaults.baseURL;t=t.replace(/^https?:\/\//,"");let n=`${e}://${t}`;return n.includes("localhost")&&(n=n.replace(":9091",":9090")),n}function s(e){const t=(0,a.KR)(""),o=(0,a.KR)(localStorage.getItem("sessionTime"));let l=null;(0,i.sV)((()=>{"undefined"!=typeof Worker?(l||(l=new Worker(new URL(n.p+n.u(573),n.b),{type:void 0}),l.addEventListener("message",(function(n){var o=n.data;if("tick"==o.type){var a=Math.floor(o.remainingTime/60),i=o.remainingTime%60,l=s(2,a.toString())+" : "+s(2,i.toString());t.value=l}else"timeout"==o.type&&(console.log("ì„¸ì…˜íƒ€ìž„ì•„ì›ƒ"),e&&e())}))),l.postMessage({command:"reset",timeoutSeconds:o.value})):console.log("Your browser doesn't support web workers.")}));const s=(e,t)=>t.length>=e?t:new Array(e-t.length+1).join("0")+t;return(0,i.hi)((()=>{l&&(l.terminate(),l=null)})),{sessionTime:t}}},3173:function(e,t,n){var o=n(4373);const a=o.A.create({baseURL:"https://oral-therine-heesu-f4935ad1.koyeb.app"});a.interceptors.request.use((e=>{const t=localStorage.getItem("jwt");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>(console.log("ì—ëŸ¬ë°œìƒ : ",e),Promise.reject(e)))),t.A=a},7203:function(e,t,n){n.d(t,{SR:function(){return u},ST:function(){return d},a1:function(){return s},mn:function(){return r},wI:function(){return c}});n(3375),n(9225),n(3972),n(9209),n(5714),n(7561),n(6197);var o=n(5897),a=n(4464);let i=null;const l=new Set;function s(){if(i)return;let e=(0,a.gh)()+"/ws/chat";i=new WebSocket(e),i.onopen=()=>{console.log("ì „ì—­ Websocket open")},i.onmessage=e=>{let t=JSON.parse(e.data);const n=(0,o.L)();"TYPING"!=t.type&&"STOP"!=t.type&&n.handleIncomingMessage(t),"LIST"!=t.type&&l.forEach((e=>e(t)))},i.onclose=()=>{console.warn("ì „ì—­ WebSocket closed. Reconnecting in 3s..."),i=null,setTimeout(s,1e3)},i.onerror=e=>{console.error("ì „ì—­ WebSocket error",e)}}function r(){return i}function c(e){i&&i.readyState===WebSocket.OPEN&&i.send(JSON.stringify(e))}function u(e){l.add(e)}function d(e){l.delete(e)}},1102:function(e,t,n){n.d(t,{JQ:function(){return a},y_:function(){return o}});const o={ITEM_PER_PAGE:5,PAGE_PER_SECTION:10},a=(localStorage.getItem("sessionTime"),"BB-jj2EArj_qbaSA6eCicuMBbt9CnaErLl7hHthN1M3UQif7XpnA6jQpiQ2ShqMmWCBX9zWbN_0F903c8K4NRwo")},6017:function(e,t,n){var o=n(595);const a=(0,o.A)();t.A=a},6588:function(e,t,n){var o=n(5130),a=n(6768);const i={key:0},l={key:1},s={key:1},r={key:1};function c(e,t,n,o,c,u){const d=(0,a.g2)("Login"),g=(0,a.g2)("Header"),h=(0,a.g2)("LeftMenu"),m=(0,a.g2)("router-view"),p=(0,a.g2)("AdminLogin"),A=(0,a.g2)("AdminHeader"),k=(0,a.g2)("AdminLeftMenu");return(0,a.uX)(),(0,a.CE)("div",null,[o.isAdmin?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",null,[o.isLogin?((0,a.uX)(),(0,a.CE)("div",l,[(0,a.bF)(g),(0,a.bF)(h),(0,a.bF)(m)])):((0,a.uX)(),(0,a.Wv)(d,{key:0}))]),o.isOauthCallback?((0,a.uX)(),(0,a.Wv)(m,{key:0})):(0,a.Q3)("",!0)])),o.isAdmin?((0,a.uX)(),(0,a.CE)("div",s,[(0,a.Lk)("div",null,[o.isLogin?((0,a.uX)(),(0,a.CE)("div",r,[(0,a.bF)(A),(0,a.bF)(k),(0,a.bF)(m)])):((0,a.uX)(),(0,a.Wv)(p,{key:0}))])])):(0,a.Q3)("",!0)])}n(4979);var u=n(144),d=n(973),g=n(4232),h=n.p+"img/logomini.8cb619d3.svg",m=n.p+"img/userlogin.4e568785.svg",p=n.p+"img/userlogout.7b94e9ed.svg";const A={class:"header"},k={class:"dpf"},f={key:0},v={class:"em"},L={class:"chatW"},C={class:"chatHd"},b={key:0,class:"impsbChat"},y={key:1,class:"psbChat"};function w(e,t,n,o,i,l){const s=(0,a.g2)("MyPushModal"),r=(0,a.g2)("ChatModal");return(0,a.uX)(),(0,a.CE)("div",A,[t[15]||(t[15]=(0,a.Lk)("h1",null,[(0,a.Lk)("img",{src:h,alt:"TOYCHATLOGO"})],-1)),(0,a.Lk)("ul",k,[(0,a.Lk)("li",null,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.openMyPushModal&&o.openMyPushModal(...e))},[t[5]||(t[5]=(0,a.eW)(" ì•Œë¦¼ ")),o.unreadCounts>0?((0,a.uX)(),(0,a.CE)("span",f,(0,g.v_)(o.unreadCounts),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("li",null,[t[6]||(t[6]=(0,a.Lk)("img",{src:m,alt:"ì‚¬ëžŒ ëª¨ì–‘ì˜ ì•„ì´ì½˜"},null,-1)),(0,a.Lk)("span",v,(0,g.v_)(o.nick),1),t[7]||(t[7]=(0,a.eW)("Â Â ë‹˜Â Â Â ì ‘ì†ì¤‘ "))]),(0,a.Lk)("li",null,(0,g.v_)(o.sessionTime),1),(0,a.Lk)("li",null,[(0,a.Lk)("a",{onClick:t[1]||(t[1]=(...e)=>o.handleLogout&&o.handleLogout(...e))},t[8]||(t[8]=[(0,a.Lk)("img",{src:p,alt:"ë¡œê·¸ì•„ì›ƒ ì•„ì´ì½˜"},null,-1),(0,a.eW)("ë¡œê·¸ì•„ì›ƒ")]))]),(0,a.Lk)("li",null,[(0,a.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>o.openChatModal&&o.openChatModal(...e))},t[9]||(t[9]=[(0,a.Lk)("div",{class:"roadBox",title:"ì±„íŒ…ì„ ì‹œìž‘í•˜ë ¤ë©´ í´ë¦­í•´ì£¼ì„¸ìš”!"},[(0,a.Lk)("span",{class:"circle circle1"}),(0,a.Lk)("span",{class:"circle circle2"}),(0,a.Lk)("span",{class:"circle circle3"})],-1)]))])]),(0,a.bF)(s,{modelValue:o.isPushModalVisible,"onUpdate:modelValue":t[3]||(t[3]=e=>o.isPushModalVisible=e)},null,8,["modelValue"]),(0,a.bF)(r,{ref:"chatModal",modelValue:o.isModalVisible,"onUpdate:modelValue":t[4]||(t[4]=e=>o.isModalVisible=e),userId:o.userId,nick:o.nick,role:o.role,chatroomId:o.chatroomId,onResetChatroomId:o.resetChatroomId},{default:(0,a.k6)((()=>[t[14]||(t[14]=(0,a.Lk)("h2",{class:"dpn"},"ëŒ€í™”",-1)),(0,a.Lk)("div",L,[(0,a.Lk)("ul",C,[t[13]||(t[13]=(0,a.Lk)("li",null,"ì§ˆë¬¸ì´ ìžˆìœ¼ì‹ ê°€ìš”? ì§€ê¸ˆ ë¬¸ì˜í•˜ì„¸ìš”!",-1)),(0,a.Lk)("li",null,[o.isActivAdmin?((0,a.uX)(),(0,a.CE)("div",y,[t[11]||(t[11]=(0,a.Lk)("p",null,"ì˜¨ë¼ì¸ ë¬¸ì˜ê°€ ê°€ëŠ¥í•œ ìƒíƒœìž…ë‹ˆë‹¤.",-1)),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.activeAdmin,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t},(0,g.v_)(e),1)))),128)),t[12]||(t[12]=(0,a.Lk)("p",{class:"agentChat"},"ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–»ê²Œ ë„ì™€ë“œë¦´ê¹Œìš”?",-1))])):((0,a.uX)(),(0,a.CE)("div",b,t[10]||(t[10]=[(0,a.Lk)("p",{class:"timeAlert"},[(0,a.eW)(" ì˜¤ì „ 10ì‹œë¶€í„° ì˜¤í›„ 6ì‹œê¹Œì§€"),(0,a.Lk)("span",{class:"dpn"},"ê°€ëŠ¥í•œ ìƒë‹´ì›ì´ ì—†ìŠµë‹ˆë‹¤.")],-1)])))])])])])),_:1},8,["modelValue","userId","nick","role","chatroomId","onResetChatroomId"])])}var I=n(4761);const S={class:"modal-content",ref:"modalContent"},E={colspan:"4"},M={for:""},B=["checked"],P={key:0},Q=["onUpdate:modelValue","onChange"];function R(e,t,n,i,l,s){return i.visible?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"modal-overlay",onClick:t[2]||(t[2]=(0,o.D$)(((...e)=>i.close&&i.close(...e)),["self"]))},[(0,a.Lk)("div",S,[(0,a.Lk)("button",{class:"modal-close",onClick:t[0]||(t[0]=(...e)=>i.close&&i.close(...e))},"Ã—"),(0,a.Lk)("table",null,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("td",E,[(0,a.Lk)("label",M,[(0,a.Lk)("input",{type:"checkbox",checked:"Y"===e.chkAll,onChange:t[1]||(t[1]=e=>i.readAll(e))},null,40,B),t[3]||(t[3]=(0,a.eW)("ëª¨ë‘ì½ìŒ"))])])])]),(0,a.Lk)("tbody",null,[0==i.pushs.length?((0,a.uX)(),(0,a.CE)("tr",P,t[4]||(t[4]=[(0,a.Lk)("td",null,"ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.",-1)]))):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.pushs,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:t},[(0,a.Lk)("td",null,(0,g.v_)(e.title),1),(0,a.Lk)("td",null,(0,g.v_)(e.body),1),(0,a.Lk)("td",null,(0,g.v_)(e.credt),1),(0,a.Lk)("td",null,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox","onUpdate:modelValue":t=>e.chkYn=t,"true-value":"Y","false-value":"N",onChange:t=>i.readOne(e,t)},null,40,Q),[[o.lH,e.chkYn]])])])))),128))])])],512)])):(0,a.Q3)("",!0)}var V=n(2261);const T=(0,V.nY)("push",{state:()=>({pushList:[],unreadCounts:0}),actions:{handleIncomingMessage(e){e.chkYn="N",this.pushList.unshift(e),this.unreadCounts++},readOne(e){this.pushList.splice(e.index,1),this.unreadCounts--},readAll(){this.resetStore()},setPushList(e){this.pushList=e},resetStore(){this.pushList=[],this.unreadCounts=0}},persist:{key:"push-store",storage:localStorage,paths:["pushList","unreadCounts"]}});var F={props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const n=(0,u.KR)("N"),o=(0,u.KR)(e.modelValue),i=T(),l=(0,a.EW)((()=>i.pushList)),s=()=>{t("update:modelValue",!1)},r=(e,t)=>{i.readOne(e)},c=async e=>{await i.readAll(),n.value="N"};return(0,a.wB)((()=>e.modelValue),(e=>{o.value=e})),{visible:o,close:s,pushs:l,readOne:r,readAll:c}}},K=n(1241);const N=(0,K.A)(F,[["render",R]]);var U=N,X=n(3173),W=n(6017),H=n(1102),x=n(7203),Y=n(5897),J=n(4464),G=n(7530),j=n(6400);const D={apiKey:"AIzaSyBUochlrZu3cwXnaW907_ZvHPPNQkCHUaE",authDomain:"toychat-1a2b7.firebaseapp.com",projectId:"toychat-1a2b7",storageBucket:"toychat-1a2b7.firebasestorage.app",messagingSenderId:"286624352269",appId:"1:286624352269:web:c05c71880d215786ea2d44",measurementId:"G-8LWB2ZRCW1"},O=(0,j.Wp)(D),z=(0,G.dG)(O);function Z(e){console.log("ê¶Œí•œì„ ìš”ì²­í•˜ëŠ” ì¤‘..."),Notification.requestPermission().then((t=>{"granted"===t?(console.log("ì•Œë¦¼ ê¶Œí•œì´ ë¶€ì—¬ë˜ì—ˆìŠµë‹ˆë‹¤."),(0,G.gf)(z,{vapidKey:H.JQ}).then((t=>{if(t){console.log("FCM Token:",t);let n=e;X.A.post("/api/fcm/createKey",{token:t,userId:n})}else console.log("ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”")})).catch((e=>{console.log("í‘¸ì‹œ í† í° ê°€ì ¸ì˜¤ëŠ” ì¤‘ì— ì—ëŸ¬ ë°œìƒ",e)})),(0,G.xD)(z,(e=>{console.log("ðŸ“© Foreground ë©”ì‹œì§€ ìˆ˜ì‹ :",e);const t=e.data?.title||"ì•Œë¦¼",n=e.data?.body||"";new Notification(t,{body:n});const o=T();o.handleIncomingMessage(e.data)}))):console.log("ê¶Œí•œì„ ì–»ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")}))}async function q(e){const t=await(0,G.gf)(z,{vapidKey:H.JQ});t?(await X.A.post("/api/fcm/deleteKey",{token:t,userId:e}),await(0,G.ni)(z)):console.log("í† í° ì—†ìŒ")}var _={components:{ChatModal:I.A,MyPushModal:U},setup(){const e=(0,d.rd)(),t=(0,u.KR)(localStorage.getItem("id")),n=(0,u.KR)(localStorage.getItem("nick")),o=(0,u.KR)("USR"),i=(0,u.KR)(!1),l=(0,u.KR)(!1),s=(0,u.KR)(localStorage.getItem("chatroomId"));let r=null;const c=(0,u.KR)([]),g=(0,u.KR)(!1),h=(0,Y.L)(),m=T(),p=(0,a.EW)((()=>m.unreadCounts)),A=async()=>{await q(t.value),window.location.href=X.A.defaults.baseURL,localStorage.clear(),h.resetStore()},{sessionTime:k}=(0,J.z)(A),f=()=>{s.value="",console.log("headerì—ì„œ emit ë°›ìŒ")},v=()=>{""==s.value||null==s.value?X.A.post("/api/chat/create",{id:t.value,nick:n.value}).then((e=>{s.value=e.data.chatroomId,i.value=!0})):i.value=!0},L=()=>{l.value=!0},C=()=>{let e=(0,J.gh)()+"/ws/adminOnList?role=usr";r=new WebSocket(e),r.onopen=()=>{console.log("activeAdminChkSocket connection opened")},r.onmessage=e=>{console.log("activeAdminChkSocket got message");let t=e.data,n=t.split(",");c.value=n,g.value=c.value[0].length>0},r.onclose=()=>{console.log("activeAdminChkSocket connection closed")},r.onerror=e=>{console.error("activeAdminChkSocket error: ",e)}};return(0,a.sV)((()=>{(0,x.a1)(),C(),W.A.on("reset-chatroom-id",f),Z(t.value)})),(0,a.hi)((()=>{r&&r.close()})),(0,a.xo)((()=>{W.A.off("reset-chatroom-id",f)})),(0,a.wB)(s,(e=>{localStorage.setItem("chatroomId",e)})),{router:e,userId:t,nick:n,role:o,isModalVisible:i,isPushModalVisible:l,chatroomId:s,activeAdmin:c,isActivAdmin:g,openChatModal:v,openMyPushModal:L,openActiveAdminChkSocket:C,resetChatroomId:f,sessionTime:k,handleLogout:A,unreadCounts:p}}};const $=(0,K.A)(_,[["render",w]]);var ee=$,te=n.p+"img/chatlist.002fcb5e.svg";const ne={class:"leftMenu"};function oe(e,t){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",ne,[t[2]||(t[2]=(0,a.Lk)("p",{class:"dpn"},"ì™¼ìª½ë©”ë‰´",-1)),(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.bF)(n,{to:"/chat/list","active-class":"on"},{default:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.Lk)("img",{src:te,alt:"ì±„íŒ… ì´ë ¥ ì•„ì´ì½˜"},null,-1),(0,a.eW)("ì±„íŒ… ì´ë ¥ ")]))),_:1,__:[0]})]),(0,a.Lk)("li",null,[(0,a.bF)(n,{to:"/chat/paginationTest","active-class":"on"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("img",{src:te,alt:"ì±„íŒ… ì´ë ¥ ì•„ì´ì½˜"},null,-1),(0,a.eW)("íŽ˜ì´ì§• í…ŒìŠ¤íŠ¸ ")]))),_:1,__:[1]})])])])}const ae={},ie=(0,K.A)(ae,[["render",oe]]);var le=ie,se=n.p+"img/kakao_btn.beef637a.webp",re=n.p+"img/naver_btnD_circle.30d5d9d7.png",ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAYAAACLz2ctAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABDySURBVHgB7Z19jBTlHcd/O7t7x3F3e5wvQCLKntDUJih32pQmQDxIfUmjAfQfrIl3hMQ0Nb5gGq2pFc6QGExa0Mb+QTS9M2mliYiU2FQ0uk0gLbaVw5KKQcuKJQLl5fZeOLl96+87N3Ps7e3L7M7M7vPMPJ9knH0Z74X93vf38vxmJkCKKbLZ7JyxsbFoJpOJ8uOopmkL8Rq/FTX22CgQCESLfIkhPm4Iez7G3Mf5632JPX+9eEtLyyAppgiQT4GgRkZGunnfyeJYauyjVAP4ew1CkLw/wqKMQZSGYH2HbwRoCG4txMaOtLZWYrOKIUq4495wODzY1NQUJx/gaQHC4Xh3O3+42HeTXMT4594bDAZjXg7bnhPg+Ph4NJVK9bDL9YrmcjaI8+/ydigUeslrzugJASK8Dg8PQ3BrSD6nq5QYbwORSKSfPIDUAjTdjgX4BBkVqo+I8xbjfLFPZleUUoBG9bqZvO92VumXVYhSCVAJryzSCVEKASLUJpPJ35ISnlWkEaLQAkRxMTo6utnI8RSVI7wQhRUgC+9xbqVsIf8VF04T561P1KpZOAGy8DpZeNtJhVunibMbrhLNDTUSCC4yNrP4DpMSnxsgjz6Bf2MSCCEc0Ojn7cFAAClqgTBuWHcHRK7Hf5mHlfhqCtzwcCKRqHtxVzcHVBWuGPDy5Q6OPn3t7e11GQeriwBVyBWOuoXkmgvQWM3YQ6q9IhqY2F5X69GvmuaAHHIxOPAhKfGJCE5FqHleWDMBGi2WflIIDeeE22vZqqlJCMYvxM63hRTSwELc0tra2kcu47oAWXzbVaUrJ7UQoasCHB4exgRLLylkpp/XkTeQS7iWAxp5RC8pZKcXUYxcwhUBqpzPWyCFcqswcTwEK/F5FzdyQkcFaMzw7SCFZ+FmdS83qwfIIRwToDHHd5gUnoedcBU7YYwcwJEcEGu7LL49pPAFWErFZ04OYFuAmGpJJpNYXouSwi/MmZiY2HPx4kXbS6q2BYiRKlLi8x0chjtDoZDtytiWAFF0qFUO/4LP3u7wQtVFiHGuLooONdnib4bC4XBXtbOEVTugkfcp8Sn0fJCqpCoBGl3xKCkUNJkPcijeQlVQcQg2Qu8JUijy4CZ1V6UT1RU7oBF6FYoZGBcUqIiKBIiLQJIKvYridFdaFVsOwUboVQ1nRTmG0ul0h9XTPENkERaf7wqP7NgYpY9ySnP2NGVOfEFZ3mPT3zt7ZtqxgeYWouZmCsydrz8OdCzibTFp/Fzjxz5ijtGg3mTlYEsO6JfCwxRc5ugRyhw6MENk1RIwRKgtW07BJZ38fB55He4NdljpDVoSoNdH69MsuNSuAcrC5cZGyW20JUspuPouCvHmYWKRSGRVuYPKCtCr7ge3S+17k9L73qqJ6AoBZwyuvpOFeLcnXdHK2FZZAXrN/UQQXj5TQrz3/slc0juUdcGSAvSa+6U/eJeSu16fKiREA0IMrX/IU6G5nAuWFKBX3A/FxMTL2/TiQgaQH4bX93glLJd0waIC9Ir7pfbt5gLjdWHCrVW85IalKuKiKyFG309akOslX3uFt99IJz6ANCH58oucMjh2/k/dmJiY6C32XlEH5PAL94uShCDkXn7hOW6rfE5eIMj9w/BjT8lcoBRdHSnogDKv+erie/ZJz4gPpA8d5Kp9N0nMHJzOWeiNYiG4hyRkSnyCVrnVgjwwtF7Kj2QK406mM1/Pf0HW4sPL4kP49QJGGI7nvjbDATlhlO4kIyU+OSgUhmcIsJhVioxecCjxCQ9ra0YeMU2AuLwGSVZ8oNVSr4IDjWI3msVeFJ9BFBepz31h2jwgx+huVinJApbWUrym6zYQmbZsBQUxUrWkc3Lur0BLBNM0GXZiTNdkMdbFzyvFw+LTyWQy3byLmc+nqY3bL5h47iYJ0PO+TQ+71mSGwDAcgNEpbNWAtCD9wX5K8R+KlRTB6+IzmLY0NyVA2arfCc770B9zGlN4wXvvc7TxW24Qwifi0+FI2242padCMItPmrsW4cN0Q3wQHtZf3VhxwIABnBQixM8/7fv6SHwgGAyu5V0/HufmgNJUv/gQnQSCa3jm+apDreXvM3c+NbDQUpxLmgMSfhMfyL1F21QI5upEijtWYnE+5aAAIYrGrb/U97UEBQtyw/DGn5APiXMe2IEHugBxnTe2xYskOIF0goLv301jb4QoM9RAdsFZa43P9NVcfIoreaDeBwyFQlLkf9rFP1G4/TOKPHicgvPGyQ71cj7FJGx43djrAjR6M8ITPrVN32ttE9S28Rg1rfyaqmFKfN46/0IqzHRPFyA3n93Nvh1AGzlAgcsnp73WtPI0Nd/zJQVmpakSVNgVgmkCjJLgBP+3q+Drjbdc0N1QmzNBVtDPteDcT1FfTNPTixBeAcmS4DR9dFXJ97PfBOnS+wvo8ifFj4Przdr5O1KIAQoRzRhAEJogFx/lQBhGOC6VF6LJrBCKqMYFSJQER7MgQBPkhYVCsn6WmbcvhSEdXAlHNa5GoiQ42vi/KjoeLRq0akILrwwqKPcTD2gPRUiUBAbNZ22sMgECtGogQoRk5X7CEg1xNbKQBCZwqXLx5YKQHLjtenKryjp6Srz5yebGLHVcQ8LD2mvDMILQt1rQhu1PvQRuu8c1AT77lngChPi2PyB8YwNENVah0ALMbz5XQ7bpZvITZ0fkmGrHfQZRhIjtgJe/Ijtkmm+mbKiN/MTYZYiQhAfmhyJE7LsdZRJkh2zD9eRHxr4hKRBegIFv7IXgzGx/hV+TsQkpwnDUkRtWuwnaMHbINt5AfuTsMEmB8AJUeBslQEVdUQJU1BXhBZixmcM50UdUuAcEGCcPo/lUgM32z9mqBUPih+AGmw44fpT8SPMskoEhLMVZuqthvcg02mskY5ImkLLXypGR5gbx14J5FW4IS3FiC9CBRnJg3N5EjYzMjZDwwPwgwC9JZBxoJJ89FyM/0dw4uYkOay+BcSyxHTCynOywY2wJvZP4mv7YQa6w9T7nQ92+QaJD/6l+KW1uqxSjWCAOAcZJYLLBNr0VU2k1+3V6Nm0d7aKPk5jMvEQHz3xMy+fdSk6z5DrnP+xdh+yt48oQfg3iKELiJDiZ9h9WdPzxVBs9MrzcEN8ku0+8RzKANVy7U9ZLriMpgPY0Jk6Ck65AgH8YX0QPDXXrDpjL4IVjNHj+GImOEyP+HdeSFKTT6biWTCbjJDhZroQRiksxkg3T1pEuPecrxoufvEajyUskMrs+sidAFB9upAVu0N7ePqgZl0qNk8BAfKVcEG7Xw673zuXSFfPp8XP0+vG9JCoffBqwPUYli/i4Ah7E3lwJGSTBSV/7QMHXIbqeAiG3GG/G9wsbiu26H1h2I8mC3v7TBchqFP5OzpnWFTPCMMItwi7CbyUgFMMNRQKVrxNDpEsWSNOCueKAXI0I74AgNf/H+h5u90hiuV5wVAPE9+TftgmTD6Ln54z7ZbkHSFLAxW9M3+M/XI3ESALSLMB/ZhbNaLFUgy7CQ9vq7oQn+Nu//L4z52+svomkIZVKXXFAGQoRgBD896t/bjnfK8fnwyd1J6yXCCG+Z9/S9NMo7TI3kqVli+QpQMz7hGg5L4pbHuZwf/ROmt/k3HUnzHD87n8PUC3ZNxigTW84Iz6w/nskDbkpn1boRZFpCXPL5VvO3tIEItzGhcmLR9wvTvD1f3rgNXr1r+fJKeB+q78jTfEBpsxuKvmQ5VYNJnAtrG44Ddz1/o47dKd1EhQ8u+Pv8bZff6ylrqHZpx/nNW770z6P/UAuAebeuFramxXCSR4+sNm1ShZC7LzqJl2MiyLVi+QI9xwxCPHnUwcL/qyNF9ZS48V1VC1wv509Urlf4ZsVgkQisYVD8WaShN0n9tMrn75BbmOKcfn8Lv3xPN6QCuRz5tI5+nzkJJ3m/RcjX9EBFp6VP5CGkRXUeO5BCmQqL6529makab0ArjU2tbW17TCfTxMgbibMB3xIEvHKv3+vh7Z6MH/2ZDEEkdl1YoTk5lPPUCBlvcBavyzLxYdU7ofw24U1YPP5jAYUh2HcsjVKkoAPHvkgnEd24ICzzv2IwiMryx4rYeiF+8XZ/aaNBmsFDhogiUAofP67jzramqkXWe0Sjc99lS637yl5HMTnxiR2DZjR6pvhgFwNR7kalubG1SZmP0+0Nd5qCXJ1jCo5PyTj8rsQnwyX4M0nt/o1meGAxgExkgw44K++/7QnnBCkG0/S2HUvUKZxemqxcSVJKT4mli8+UPDEdFlWRfLxmggzoXM0uuAXUyFZtn5fHgVTu4Kr4EZTGmFY7KunFgFh+Ll//NoThQlAnvvojT+jOxbJebXXQsWHSUEHxEIx/08vkaTAAXeu7OPVjDtIdnRXX/a0tOID3FuOFX2v2BuyFiP5YMgAzWrRzwUpROfVN9FTt2yUPqUoVHyYlBxEk2lprhQIyWhYHzxzmGTAHLhwej26TvTz0tuGYm+WFKCMKyOlgBsOHN8rdKvGK65nUsr9QNlRXK+4YC4Dx99mMR4USogQXs/iNbT0aonGmstT0v1AWQF6zQVNID5MqtTbET0qPJ1y7gcsnYzgRRfMBeNSmFyBK9YC5Hh3LVhOK+be6knhGZR1P2BJgF6piMuBSvnIhWO6GI+c/8wxZ4TgFkduoKVXfVsf6/Kw6Kaw4n7A8ulYiURiB/dzHicfAQFixg+T12fGz+vPIVJznwtEpm+hSbE1h5tocesN+uNi84MexpL7AcsClH11RFEbsOqRyWRWWXE/YPki5cbqSB8pFCXgKNlnVXz68VQhXi9IFNVTas23GBXfpkHTtE2kUBQAoZcqpGIBtrS0DKpQrMgHmqgk9JpUfVESrooPc7zvJIXvqSb0mlR9pyS2W5zMKvQV9hXug/vMVBN6TaoWIOxWhWIFU1XoNbF9XTA/NqgVk2BomUPvE2QD2wJEg5or4w9VPugvjIZzl3mZtWqxfbdM/AAqH/QXOasdtj9zZy7NSd4d21LMJP/yGnZw7H7Bra2tMd5ZWoBWyAsuLuSU+ICjN6yORCL9qjL2Lvhsc69s5QSOheBcZLvMm6I8hvi2kMO4IkCg2jPewS3xAdcECFiE/SzCHlJIC66WxuLrJZdwNAfMBz+4ygnlxWg095KLuCpAAOtWIpQPI+zaWuWwgqshOBdVmMiDmzlfPjUTIGARPsEi3E4KkdmAdhrViJoKEIyOjnZyJ30PCzFKCmHAWBWv6a8zFhRqhus5YD6YqMY6ItYTSSEEuHcbBgtqLT5QcwECzI/hF5b5GoReAZ9BJadROk3NQ3A+Rl6I4kSdb1xDEHJ55/jSWqXUXYAAl/4wZgqjpHAdI+Suq5fr5VKXEJwP/iFwUovqF7qP0WLpEkF8QAgHzEW5oWvEuPvg6CiVEwgnQJPh4WEs421WQrSHKLleMYQIwYVAM9Ro1wyQoiqMCrdDVPEBYR0wFyMsb1GTNZZBuN0gSp5XCikEaKKEWJYYrk5Vj4ZytUglQBMlxBlIJzwTKQVoYgqRH97ut2LFKC6Q4/XLEGqLIbUAc0HVzDs4Yjd5mxhuJmkIT/pzsT0jQBPDFTFIucYrrmgMbgw0NDT0NzU1xclDeE6AuRijX90sxDUknzPC6f7Cf0wxGXM7q3hagLkYt5ro5A91LT9dKtq1bAyX28s/1yD/0bzthfBqBd8IMB9cVCkUCnVyLgWHXMoCiNZKlBAbhMb7I4bgYn4RXD6+FWAxELZZlFEIkp9ClAt5P4efY1xM3/i1gqNjOUO2Q3wMBIVrKCaw5+dxDqfxZDIZ96vYCvF/0CFNMYQ4XQEAAAAASUVORK5CYII=",ue="data:image/png;base64,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";const de={class:"bg"},ge={style:{display:"block"}},he=["href"],me=["href"],pe=["href"],Ae=["href"];function ke(e,t,n,o,i,l){return(0,a.uX)(),(0,a.CE)("div",de,[(0,a.Lk)("div",ge,[t[4]||(t[4]=(0,a.Lk)("p",null,"TOYCHAT",-1)),(0,a.Lk)("a",{href:l.getSocialLoginUrl("kakao")},t[0]||(t[0]=[(0,a.Lk)("img",{src:se,width:"50"},null,-1)]),8,he),(0,a.Lk)("a",{href:l.getSocialLoginUrl("naver")},t[1]||(t[1]=[(0,a.Lk)("img",{src:re,width:"50"},null,-1)]),8,me),(0,a.Lk)("a",{href:l.getSocialLoginUrl("google")},t[2]||(t[2]=[(0,a.Lk)("img",{src:ce,width:"50"},null,-1)]),8,pe),(0,a.Lk)("a",{href:l.getSocialLoginUrl("github")},t[3]||(t[3]=[(0,a.Lk)("img",{src:ue,width:"50"},null,-1)]),8,Ae)])])}var fe={methods:{getSocialLoginUrl(e){let t=window.location.origin;return t=X.A.defaults.baseURL,t.includes("localhost")&&(t=t.replace(":9091",":9090")),`${t}/oauth2/authorization/${e}`},fn_kakaoLogin(){window.Kakao.Auth.login({scope:"profile_nickname",success:this.fn_getKakaoAccount})},fn_getKakaoAccount(){window.Kakao.API.request({url:"/v2/user/me",success:e=>{var t=e.id,n=e.kakao_account.profile.nickname;localStorage.setItem("isAuthenticated",!0),localStorage.setItem("id",t),localStorage.setItem("nick",n),localStorage.setItem("role","USR"),this.$router.go("/")},fail:e=>{console.log(e),localStorage.setItem("isAuthenticated",!1)}})}}};const ve=(0,K.A)(fe,[["render",ke]]);var Le=ve,Ce=n(9730);const be={class:"header"},ye={class:"dpf"},we={key:0},Ie={class:"em"};function Se(e,t,n,o,i,l){const s=(0,a.g2)("MyPushModal");return(0,a.uX)(),(0,a.CE)("div",be,[t[7]||(t[7]=(0,a.Lk)("h1",null,[(0,a.Lk)("img",{src:h,alt:"TOYCHATLOGO"}),(0,a.eW)(" ê´€ë¦¬ìž ")],-1)),(0,a.Lk)("ul",ye,[(0,a.Lk)("li",null,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>o.openMyPushModal&&o.openMyPushModal(...e))},[t[3]||(t[3]=(0,a.eW)(" ì•Œë¦¼ ")),o.unreadCounts>0?((0,a.uX)(),(0,a.CE)("span",we,(0,g.v_)(o.unreadCounts),1)):(0,a.Q3)("",!0)])]),(0,a.Lk)("li",null,[t[4]||(t[4]=(0,a.Lk)("img",{src:m,alt:"ì‚¬ëžŒ ëª¨ì–‘ì˜ ì•„ì´ì½˜"},null,-1)),(0,a.Lk)("span",Ie,(0,g.v_)(o.nick),1),t[5]||(t[5]=(0,a.eW)("Â Â ë‹˜Â Â Â ì ‘ì†ì¤‘ "))]),(0,a.Lk)("li",null,(0,g.v_)(o.sessionTime),1),(0,a.Lk)("li",null,[(0,a.Lk)("a",{onClick:t[1]||(t[1]=(...e)=>o.handleLogout&&o.handleLogout(...e))},t[6]||(t[6]=[(0,a.Lk)("img",{src:p,alt:"ë¡œê·¸ì•„ì›ƒ ì•„ì´ì½˜"},null,-1),(0,a.eW)("ë¡œê·¸ì•„ì›ƒ")]))])]),(0,a.bF)(s,{modelValue:o.isPushModalVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>o.isPushModalVisible=e)},null,8,["modelValue"])])}var Ee={components:{MyPushModal:U},setup(){(0,d.rd)();const e=(0,u.KR)(localStorage.getItem("adminNick")),t=(0,u.KR)(localStorage.getItem("adminId")),n=(0,Y.L)(),o=T(),i=(0,a.EW)((()=>o.unreadCounts)),l=(0,u.KR)(!1),s=async()=>{await q(t.value),window.location.href=X.A.defaults.baseURL+"/admin",localStorage.clear(),n.resetStore()},{sessionTime:r}=(0,J.z)(s),c=()=>{l.value=!0};return(0,a.sV)((()=>{(0,x.a1)(),Z(t.value)})),{nick:e,handleLogout:s,sessionTime:r,unreadCounts:i,openMyPushModal:c,isPushModalVisible:l}}};const Me=(0,K.A)(Ee,[["render",Se]]);var Be=Me;const Pe={class:"leftMenu"};function Qe(e,t){const n=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",Pe,[t[3]||(t[3]=(0,a.Lk)("p",{class:"dpn"},"ì™¼ìª½ë©”ë‰´",-1)),(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.bF)(n,{to:"/admin/chat/mnglist","active-class":"on"},{default:(0,a.k6)((()=>t[0]||(t[0]=[(0,a.Lk)("img",{src:te,alt:"ì±„íŒ… ì´ë ¥ ì•„ì´ì½˜"},null,-1),(0,a.eW)("ì™„ë£Œì±„íŒ…ê´€ë¦¬ ")]))),_:1,__:[0]})]),(0,a.Lk)("li",null,[(0,a.bF)(n,{to:"/admin/chat/serviceList","active-class":"on"},{default:(0,a.k6)((()=>t[1]||(t[1]=[(0,a.Lk)("img",{src:te,alt:"ì±„íŒ… ì´ë ¥ ì•„ì´ì½˜"},null,-1),(0,a.eW)("ì‹¤ì‹œê°„ ì±„íŒ… ì§€ì› ")]))),_:1,__:[1]})]),(0,a.Lk)("li",null,[(0,a.bF)(n,{to:"/admin/chat/myList","active-class":"on"},{default:(0,a.k6)((()=>t[2]||(t[2]=[(0,a.Lk)("img",{src:te,alt:"ì±„íŒ… ì´ë ¥ ì•„ì´ì½˜"},null,-1),(0,a.eW)("ë‚´ ì±„íŒ… ")]))),_:1,__:[2]})])])])}const Re={},Ve=(0,K.A)(Re,[["render",Qe]]);var Te=Ve;const Fe={class:"bg"},Ke={class:"login"},Ne={key:0,class:"error"};function Ue(e,t,n,i,l,s){return(0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("div",Ke,[t[6]||(t[6]=(0,a.Lk)("h1",null,"Login",-1)),(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,o.D$)(((...e)=>s.handleLogin&&s.handleLogin(...e)),["prevent"]))},[(0,a.Lk)("div",null,[t[3]||(t[3]=(0,a.Lk)("label",{for:"username"},"Id:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.id=e),id:"id",required:""},null,512),[[o.Jo,l.id]])]),(0,a.Lk)("div",null,[t[4]||(t[4]=(0,a.Lk)("label",{for:"password"},"Password:",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),id:"password",required:""},null,512),[[o.Jo,l.password]])]),t[5]||(t[5]=(0,a.Lk)("button",{type:"submit"},"Login",-1)),l.error?((0,a.uX)(),(0,a.CE)("div",Ne,(0,g.v_)(l.error),1)):(0,a.Q3)("",!0)],32)])])}var Xe=n(4373),We={data(){return{id:"",password:"",error:""}},methods:{async handleLogin(){try{const e=await Xe.A.post("/api/adminLogin",{id:this.id,pw:this.password}),t=e.data.jwt,n=e.data.nick;localStorage.setItem("jwt",t),localStorage.setItem("adminNick",n),localStorage.setItem("adminId",this.id),localStorage.setItem("isAuthenticated",!0),console.log("ì„±ê³µ"),this.$router.go("/admin")}catch(e){console.error(e),this.error="Login failed: "+(e.response?.data?.message||"Unknown error"),localStorage.setItem("isAuthenticated",!1)}}}};const He=(0,K.A)(We,[["render",Ue],["__scopeId","data-v-76a2ede6"]]);var xe=He,Ye=n(7463),Je={name:"App",components:{Header:ee,LeftMenu:le,Login:Le,AdminHeader:Be,AdminLeftMenu:Te,AdminLogin:xe,Home:Ce["default"],AdminHome:Ye["default"]},setup(){(0,d.lq)();const e=(0,d.rd)(),t=(0,u.KR)(null),n=(0,u.KR)(null),o=(0,u.KR)(null),a=async()=>{console.log("loginCheck");let e="true"===localStorage.getItem("isAuthenticated");const t=localStorage.getItem("jwt");if(t)try{const n=JSON.parse(atob(t.split(".")[1])),o=new Date(1e3*n.exp),a=new Date,i=a>o;e=!i,e&&localStorage.setItem("sessionTime",n.time)}catch(n){alert(n),e=!1}return e};return e.afterEach((async(e,i)=>{t.value=e.path.startsWith("/admin"),o.value=e.path.startsWith("/login/oauth2"),n.value=await a()})),{isAdmin:t,isLogin:n,isOauthCallback:o}}};const Ge=(0,K.A)(Je,[["render",c]]);var je=Ge;const De=[{path:"/",name:"Home",component:()=>Promise.resolve().then(n.bind(n,9730))},{path:"/chat/list",name:"ChatList",component:()=>n.e(242).then(n.bind(n,9242))},{path:"/chat/paginationTest",name:"PaginationTest",component:()=>n.e(489).then(n.bind(n,1489))},{path:"/admin",name:"AdminHome",component:()=>Promise.resolve().then(n.bind(n,7463))},{path:"/admin/chat/mnglist",name:"AdminChatManage",component:()=>n.e(781).then(n.bind(n,6781))},{path:"/admin/chat/serviceList",name:"AdminChatService",component:()=>n.e(700).then(n.bind(n,700))},{path:"/admin/chat/myList",name:"AdminMyChatManage",component:()=>n.e(917).then(n.bind(n,6917))},{path:"/admin/chat/empty",name:"AdminEmpty",component:()=>n.e(913).then(n.bind(n,2913))},{path:"/login/oauth2/callback",name:"LoginCallback",component:()=>n.e(577).then(n.bind(n,1577))}],Oe=(0,d.aE)({history:(0,d.LA)(),routes:De});var ze=Oe,Ze=n(5827);"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then((e=>{console.log("Service Worker ë“±ë¡ ì„±ê³µ:",e)})).catch((e=>{console.log("Service Worker ë“±ë¡ ì‹¤íŒ¨:",e)}));const qe=(0,o.Ef)(je).use(ze),_e=(0,V.Ey)();_e.use(Ze.A),qe.config.globalProperties.$axios=Xe.A,qe.use(_e),qe.mount("#app")},5897:function(e,t,n){n.d(t,{L:function(){return a}});n(4114);var o=n(2261);const a=(0,o.nY)("chat",{state:()=>({chatList:[],unreadCounts:{}}),actions:{handleIncomingMessage(e){const t=this.chatList.find((t=>t.chatroomId===e.chatroomId));if(t){var n={...t,lastContent:e.content,lastCredt:e.credt,status:"END"===e.type?"03":t.adm.length>0?"02":"01"};"ENTER"===e.type&&"ADM"===e.role&&n.adm.push({nick:e.nick,id:e.id}),this.chatList=[n,...this.chatList.filter((t=>t.chatroomId!==e.chatroomId))]}else{n={chatroomId:e.chatroomId,credt:e.credt,usr:{id:e.id,nick:e.nick},adm:[],lastContent:e.content,lastCredt:e.credt,status:"01"};this.chatList.unshift(n)}const o=localStorage.getItem("id")||localStorage.getItem("adminId");e.id!=o&&(this.unreadCounts[e.chatroomId]=(this.unreadCounts[e.chatroomId]||0)+1)},markAsRead(e){this.unreadCounts[e]=0},setChatList(e){this.chatList=e},resetStore(){this.chatList=[],this.unreadCounts={}}},persist:{key:"chat-store",storage:localStorage,paths:["chatList","unreadCounts"]}})},7463:function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var o=n(6768);function a(e,t){return(0,o.uX)(),(0,o.CE)("div")}var i=n(1241);const l={},s=(0,i.A)(l,[["render",a]]);var r=s},4761:function(e,t,n){n.d(t,{A:function(){return f}});var o=n(6768),a=n(5130),i=n(4232),l=n.p+"img/send.cc05441e.svg";const s={class:"userChatBox"},r={key:0},c={class:"inputMsg"};function u(e,t,n,u,d,g){return(0,o.bo)(((0,o.uX)(),(0,o.CE)("div",{class:"modal-overlay",onClick:t[8]||(t[8]=(0,a.D$)(((...e)=>u.minimize&&u.minimize(...e)),["self"]))},[(0,o.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:t[5]||(t[5]=(...e)=>u.startDrag&&u.startDrag(...e)),onMouseup:t[6]||(t[6]=(...e)=>u.stopDrag&&u.stopDrag(...e)),onMousemove:t[7]||(t[7]=(...e)=>u.drag&&u.drag(...e))},[(0,o.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>u.minimize&&u.minimize(...e)),style:{padding:"1.6rem"}},"ìµœì†Œí™”"),(0,o.Lk)("button",{class:"modal-close",onClick:t[1]||(t[1]=(...e)=>u.close&&u.close(...e))}),(0,o.RG)(e.$slots,"default"),(0,o.Lk)("div",s,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.messages,((e,t)=>((0,o.uX)(),(0,o.CE)("div",{key:t},[(0,o.Lk)("div",{class:(0,i.C4)(e.id===u.userId?"message me":"message other")},[(0,o.Lk)("p",null,(0,i.v_)(e.nick)+" : "+(0,i.v_)(e.content),1)],2)])))),128))]),u.typingUsers.length>0?((0,o.uX)(),(0,o.CE)("div",r,[(0,o.Lk)("p",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(u.typingUsers,((e,t)=>((0,o.uX)(),(0,o.CE)("span",{key:t},(0,i.v_)(t>0?",":"")+" "+(0,i.v_)(e),1)))),128)),t[9]||(t[9]=(0,o.eW)(" ë‹˜ì´ ìž‘ì„±ì¤‘ìž…ë‹ˆë‹¤... "))])])):(0,o.Q3)("",!0),(0,o.Lk)("div",c,[(0,o.bo)((0,o.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>u.message=e),onKeydown:t[3]||(t[3]=(...e)=>u.keyupAction&&u.keyupAction(...e)),placeholder:"ë©”ì‹œì§€ ìž‘ì„±.."},null,544),[[a.Jo,u.message]]),(0,o.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>u.sendMessage&&u.sendMessage(...e)),class:"sendBtn"},t[10]||(t[10]=[(0,o.Lk)("img",{src:l,alt:"ì „ì†¡ ë²„íŠ¼ ì•„ì´ì½˜"},null,-1)]))])],544)],512)),[[a.aG,u.visible]])}n(4114);var d=n(144),g=n(3173),h=n(6017),m=(n(4464),n(7203)),p={props:{modelValue:{type:Boolean,default:!1},userId:{type:String,default:""},nick:{type:String,default:""},role:{type:String,default:""},chatroomId:{type:String,default:""}},methods:{closeChatroom(){closeProcess()}},setup(e,{emit:t}){const n=(0,o.EW)((()=>e.userId)),a=(0,o.EW)((()=>e.nick)),i=(0,o.EW)((()=>e.role)),l=(0,o.EW)((()=>e.chatroomId)),s=(0,d.KR)(e.modelValue),r=(0,d.KR)(null),c=(0,d.KR)(!1);let u=0,p=0,A=0,k=0;const f=(0,d.KR)(""),v=(0,d.KR)([]);let L=null;const C=(0,d.KR)([]),b=["Shift","Control","Alt","CapsLock","Escape","PageUp","PageDown","End","Home","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Insert","Delete","Meta","Tab"];function y(e){const t=e.type;if("TYPING"==t)C.value.includes(e.nick)||e.nick==a.value||C.value.push(e.nick);else if("STOP"==t)C.value=C.value.filter((t=>t!==e.nick));else{const t={id:e.id,nick:e.nick,content:e.content};v.value.push(t)}}const w=e=>{let t="ENTER"===e?`${a.value}ë‹˜ì´ ìž…ìž¥í•˜ì˜€ìŠµë‹ˆë‹¤.`:"END"===e?"ëŒ€í™”ê°€ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.":f.value;const o={chatroomId:l.value,id:n.value,nick:a.value,content:t,type:e,role:i.value};return o},I=()=>{(0,m.wI)(w("TALK")),f.value=""},S=()=>{(0,m.wI)(w("ENTER"))},E=()=>{g.A.post("/api/chat/isNew",{id:n.value,chatroomId:l.value}).then((e=>{var t=e.data;t&&("USR"==i.value&&M(),S("ENTER"))}))},M=()=>{let e={nick:"TOYCHAT",content:`ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–»ê²Œ ë„ì™€ë“œë¦´ê¹Œìš”? ${String.fromCodePoint(128522)}`};v.value.push(e)},B=()=>{g.A.post("/api/chat/liveChatList",{chatroomId:l.value}).then((e=>{v.value=e.data}))},P=()=>{var e=window.event.keyCode;b.includes(e)||(13==e?(I(),(0,m.wI)(w("STOP"))):(0,m.wI)(w("TYPING")),clearTimeout(L),L=setTimeout((()=>{(0,m.wI)(w("STOP"))}),3e3))},Q=()=>{confirm("ì¢…ë£Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&R()},R=()=>{(0,m.wI)(w("END")),l.value="",v.value=[],t("update:modelValue",!1),h.A.emit("reset-chatroom-id")},V=()=>{t("update:modelValue",!1)},T=e=>{c.value=!0,u=e.clientX,p=e.clientY;const t=r.value.getBoundingClientRect();A=t.left,k=t.top},F=()=>{c.value=!1},K=e=>{if(!c.value)return;const t=e.clientX-u,n=e.clientY-p;r.value.style.left=`${A+t}px`,r.value.style.top=`${k+n}px`};return(0,o.wB)((()=>e.modelValue),(e=>{s.value=e,e&&(B(),E())})),(0,o.sV)((()=>{(0,m.SR)(y)})),(0,o.hi)((()=>{(0,m.ST)(y)})),{userId:n,nick:a,role:i,chatroomId:l,visible:s,keyupAction:P,close:Q,modalContent:r,startDrag:T,stopDrag:F,drag:K,message:f,messages:v,makeSendBody:w,sendMessage:I,minimize:V,closeProcess:R,typingUsers:C}}},A=n(1241);const k=(0,A.A)(p,[["render",u]]);var f=k},9730:function(e,t,n){n.r(t),n.d(t,{default:function(){return r}});var o=n(6768);function a(e,t){return(0,o.uX)(),(0,o.CE)("div")}var i=n(1241);const l={},s=(0,i.A)(l,[["render",a]]);var r=s}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,i){if(!o){var l=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,r=0;r<o.length;r++)(!1&i||l>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[r])}))?o.splice(r--,1):(s=!1,i<l&&(l=i));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[o,a,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,o){return n.f[o](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{242:"e83dda6b",489:"93a95981",573:"e7e87ddd",577:"36fab92b",700:"daa6b101",781:"3847f5c3",913:"af0fc976",917:"ca8e3a67"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{242:"733c6f10",489:"733c6f10",700:"733c6f10",781:"e9e7a9c8",917:"733c6f10"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="test1:";n.l=function(o,a,i,l){if(e[o])e[o].push(a);else{var s,r;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(r=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=o),e[o]=[a];var g=function(t,n){s.onerror=s.onload=null,clearTimeout(h);var a=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(g.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=g.bind(null,s.onerror),s.onload=g.bind(null,s.onload),r&&document.head.appendChild(s)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,a,i){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",n.nc&&(l.nonce=n.nc);var s=function(n){if(l.onerror=l.onload=null,"load"===n.type)a();else{var o=n&&n.type,s=n&&n.target&&n.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+s+")");r.name="ChunkLoadError",r.code="CSS_CHUNK_LOAD_FAILED",r.type=o,r.request=s,l.parentNode&&l.parentNode.removeChild(l),i(r)}};return l.onerror=l.onload=s,l.href=t,o?o.parentNode.insertBefore(l,o.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=n[o],i=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(i===e||i===t))return a}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){a=l[o],i=a.getAttribute("data-href");if(i===e||i===t)return a}},o=function(o){return new Promise((function(a,i){var l=n.miniCssF(o),s=n.p+l;if(t(l,s))return a();e(o,s,null,a,i)}))},a={524:0};n.f.miniCss=function(e,t){var n={242:1,489:1,700:1,781:1,917:1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){n.b=document.baseURI||self.location.href;var e={524:0};n.f.j=function(t,o){var a=n.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else{var i=new Promise((function(n,o){a=e[t]=[n,o]}));o.push(a[2]=i);var l=n.p+n.u(t),s=new Error,r=function(o){if(n.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var i=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+l+")",s.name="ChunkLoadError",s.type=i,s.request=l,a[1](s)}};n.l(l,r,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,l=o[0],s=o[1],r=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)n.o(s,a)&&(n.m[a]=s[a]);if(r)var u=r(n)}for(t&&t(o);c<l.length;c++)i=l[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(u)},o=self["webpackChunktest1"]=self["webpackChunktest1"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],(function(){return n(6588)}));o=n.O(o)})();
//# sourceMappingURL=app.c0754f51.js.map