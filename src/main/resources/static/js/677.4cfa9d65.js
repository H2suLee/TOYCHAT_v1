"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[677],{8677:function(a,t,e){e.r(t),e.d(t,{default:function(){return D}});var o=e(6768),l=e(4232),s=e(5130);const n={class:"contentW"},r=(0,o.Lk)("ul",null,[(0,o.Lk)("li",{class:"tit"},"채팅 관리"),(0,o.Lk)("li",{class:"navi"},[(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"홈"),(0,o.Lk)("li",null,"채팅 관리")])])],-1),d=(0,o.Lk)("h1",{class:"dpn"},"채팅 관리",-1),c={class:"tbl"},u=(0,o.Lk)("thead",null,[(0,o.Lk)("tr",null,[(0,o.Lk)("td",{class:"wd6"},"roomId"),(0,o.Lk)("td",{class:"wd12"},"상태(진행중/완료)"),(0,o.Lk)("td",{class:"wd12"},"카테고리"),(0,o.Lk)("td",{class:"wd12"},"생성일"),(0,o.Lk)("td",{class:"wd12"},"수정일"),(0,o.Lk)("td",{class:"wd12"},"문의자"),(0,o.Lk)("td",{class:"wd12"},"답변자"),(0,o.Lk)("td",{class:"wd6"},"관리")])],-1),i=["onClick"],m=(0,o.Lk)("td",null,"카테고리",-1),h=["onClick"];function v(a,t,e,v,g,k){const p=(0,o.g2)("Pagination"),C=(0,o.g2)("ChatHistoryModal"),I=(0,o.g2)("ChatManageModal");return(0,o.uX)(),(0,o.CE)("div",n,[r,(0,o.Lk)("div",null,[d,(0,o.Lk)("table",c,[u,(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(v.chatrooms?.slice(v.pageStartIdx,v.pageStartIdx+v.ITEM_PER_PAGE),(a=>((0,o.uX)(),(0,o.CE)("tr",{key:a.chatroomId,onClick:t=>v.openChatHistoryModal(a.chatroomId)},[(0,o.Lk)("td",null,(0,l.v_)(a.chatroomId),1),(0,o.Lk)("td",null,(0,l.v_)(a.status),1),m,(0,o.Lk)("td",null,(0,l.v_)(a.credt),1),(0,o.Lk)("td",null,(0,l.v_)(a.upddt),1),(0,o.Lk)("td",null,(0,l.v_)(a.usr.nick),1),(0,o.Lk)("td",null,(0,l.v_)(a.adm.nick),1),(0,o.Lk)("td",null,[(0,o.Lk)("button",{onClick:(0,s.D$)((t=>v.openChatManageModal(a.chatroomId)),["stop"])}," 관리 ",8,h)])],8,i)))),128))])]),v.chatrooms.length>0?((0,o.uX)(),(0,o.Wv)(p,(0,o.v6)({key:0,list:v.chatrooms},{ITEM_PER_PAGE:v.ITEM_PER_PAGE,PAGE_PER_SECTION:v.PAGE_PER_SECTION},{onChangePage:v.onChangePage}),null,16,["list","onChangePage"])):(0,o.Q3)("",!0)]),(0,o.bF)(C,{modalValue:v.isChatHistoryModalVisible,"onUpdate:modalValue":t[0]||(t[0]=a=>v.isChatHistoryModalVisible=a),chatroomId:v.chatroomId,onResetChatroomId:v.resetChatroomId},null,8,["modalValue","chatroomId","onResetChatroomId"]),(0,o.bF)(I,{modalValue:v.isChatManageModalVisible,"onUpdate:modalValue":t[1]||(t[1]=a=>v.isChatManageModalVisible=a),chatroomId:v.chatroomId,onResetChatroomId:v.resetChatroomId},null,8,["modalValue","chatroomId","onResetChatroomId"])])}var g=e(144),k=e(4373);const p=k.A.create({baseURL:"http://localhost:9091"});p.interceptors.request.use((a=>{const t=localStorage.getItem("jwt");return t&&(a.headers.Authorization=`Bearer ${t}`),a}),(a=>Promise.reject(a)));var C=p,I=e(124);const L=a=>((0,o.Qi)("data-v-02cd7126"),a=a(),(0,o.jt)(),a),M=L((()=>(0,o.Lk)("option",{value:"cate1"},"category1",-1))),E=L((()=>(0,o.Lk)("option",{value:"cate2"},"category2",-1))),y=L((()=>(0,o.Lk)("option",{value:"cate3"},"category3",-1))),R=[M,E,y],_={key:0,class:"error-message"};function b(a,t,e,n,r,d){return n.visible?((0,o.uX)(),(0,o.CE)("div",{key:0,class:"modal-overlay",onClick:t[7]||(t[7]=(0,s.D$)(((...a)=>n.close&&n.close(...a)),["self"]))},[(0,o.Lk)("div",{class:"modal-content",ref:"modalContent",onMousedown:t[4]||(t[4]=(...a)=>n.startDrag&&n.startDrag(...a)),onMouseup:t[5]||(t[5]=(...a)=>n.stopDrag&&n.stopDrag(...a)),onMousemove:t[6]||(t[6]=(...a)=>n.drag&&n.drag(...a))},[(0,o.Lk)("button",{class:"modal-close",onClick:t[0]||(t[0]=(...a)=>n.close&&n.close(...a))},"×"),(0,o.eW)(" 카테고리 : "),(0,o.bo)((0,o.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>n.category=a)},R,512),[[s.u1,n.category]]),(0,o.eW)(" 메모 : "),(0,o.bo)((0,o.Lk)("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>n.memo=a),rows:"4",cols:"50"},null,512),[[s.Jo,n.memo]]),n.errorMessage?((0,o.uX)(),(0,o.CE)("p",_,(0,l.v_)(n.errorMessage),1)):(0,o.Q3)("",!0),(0,o.Lk)("button",{onClick:t[3]||(t[3]=(...a)=>n.save&&n.save(...a))},"저장")],544)])):(0,o.Q3)("",!0)}var P={props:{modalValue:{type:Boolean,default:!1},chatroomId:{type:String,default:""}},emits:["update:modalValue"],setup(a,{emit:t}){const e=(0,g.KR)(""),l=(0,g.KR)(""),s=(0,g.KR)(""),n=(0,o.EW)((()=>a.chatroomId)),r=(0,g.KR)(a.modalValue),d=(0,g.KR)(null);let c=(0,g.KR)(!1),u=0,i=0,m=0,h=0;const v=async()=>{try{const a=await C.post("/api/admin/chat/chatManageInfo",{chatroomId:n.value});e.value=a.data.category,l.value=a.data.memo}catch(a){console.error("Error fetching chat list:",a)}},k=()=>{if(p()&&confirm("저장하시겠습니까?")){C.post("api/admin/chat/saveChatManageInfo",{chatroomId:n.value,category:e.value,memo:l.value})}},p=()=>e.value?l.value&&l.value.trim()?(s.value="",!0):(s.value="메모를 입력해주세요.",!1):(s.value="카테고리를 선택해주세요.",!1),I=()=>{n.value="",e.value="",l.value="",t("update:modalValue",!1),t("reset-chatroom-id")},L=a=>{c.value=!0,u=a.clientX,i=a.clientY;const t=d.value.getBoundingClientRect();m=t.left,h=t.top},M=()=>{c.value=!1},E=a=>{if(!c.value)return;const t=a.clientX-u,e=a.clientY-i;d.value.style.left=`${m+t}px`,d.value.style.top=`${h+e}px`};return(0,o.wB)((()=>a.modalValue),(a=>{r.value=a})),(0,o.wB)((()=>n.value),(a=>{a&&v()})),{category:e,memo:l,errorMessage:s,chatroomId:n,visible:r,close:I,modalContent:d,startDrag:L,stopDrag:M,drag:E,save:k}}},f=e(1241);const V=(0,f.A)(P,[["render",b],["__scopeId","data-v-02cd7126"]]);var w=V,K=e(3537),A={components:{ChatHistoryModal:I.A,ChatManageModal:w,Pagination:K.A},setup(){const a=(0,g.KR)(localStorage.getItem("adminId")),t=(0,g.KR)(localStorage.getItem("adminNick")),e=(0,g.KR)([]),l=(0,g.KR)(""),s=(0,g.KR)(!1),n=(0,g.KR)(!1),r=(0,g.KR)(20),d=(0,g.KR)(10);let c=(0,g.KR)(1);const u=(0,o.EW)((()=>(c.value-1)*r.value)),i=a=>{c.value=a},m=async()=>{try{const t=await C.post("/api/admin/chat/mnglist",{id:a.value});e.value=t.data}catch(t){console.error("Error fetching chat list:",t)}},h=a=>{console.log("id: ",a),l.value=a,s.value=!0},v=a=>{l.value=a,n.value=!0},k=()=>{l.value=""};return(0,o.sV)((()=>{m()})),{userId:a,nick:t,chatrooms:e,chatroomId:l,isChatHistoryModalVisible:s,isChatManageModalVisible:n,openChatHistoryModal:h,openChatManageModal:v,resetChatroomId:k,ITEM_PER_PAGE:r,PAGE_PER_SECTION:d,pageStartIdx:u,onChangePage:i}}};const S=(0,f.A)(A,[["render",v]]);var D=S}}]);
//# sourceMappingURL=677.4cfa9d65.js.map