"use strict";(self["webpackChunktest1"]=self["webpackChunktest1"]||[]).push([[206],{9206:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var o=a(6768),l=a(4232);const n={class:"contentW"},s=(0,o.Lk)("ul",null,[(0,o.Lk)("li",{class:"tit"},"실시간 채팅 지원"),(0,o.Lk)("li",{class:"navi"},[(0,o.Lk)("ul",null,[(0,o.Lk)("li",null,"홈"),(0,o.Lk)("li",null,"실시간 채팅 지원")])])],-1),c={key:0},i={key:1},r=(0,o.Lk)("h1",{class:"dpn"},"실시간 채팅 지원",-1),d={class:"tbl"},u=["onClick"],k={class:"wd12"},h={class:"wd12"},g={class:"wd12"},E={class:"wd12"};function m(e,t,a,m,v,p){const C=(0,o.g2)("Pagination"),I=(0,o.g2)("ChatModal");return(0,o.uX)(),(0,o.CE)("div",n,[s,0===m.chatrooms.length?((0,o.uX)(),(0,o.CE)("div",c,"실시간 채팅 지원이 없습니다.")):((0,o.uX)(),(0,o.CE)("div",i,[r,(0,o.Lk)("table",d,[(0,o.Lk)("tbody",null,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(m.chatrooms?.slice(m.pageStartIdx,m.pageStartIdx+m.ITEM_PER_PAGE),(e=>((0,o.uX)(),(0,o.CE)("tr",{key:e.chatroomId,onClick:t=>m.openChatModal(e._id)},[(0,o.Lk)("td",k,"rid: "+(0,l.v_)(e._id),1),(0,o.Lk)("td",h,"닉: "+(0,l.v_)(e.participants[0].nick),1),(0,o.Lk)("td",g,"생성일: "+(0,l.v_)(e.credt),1),(0,o.Lk)("td",E,"상태: "+(0,l.v_)(e.status),1)],8,u)))),128))])]),m.chatrooms.length>0?((0,o.uX)(),(0,o.Wv)(C,(0,o.v6)({key:0,list:m.chatrooms},{ITEM_PER_PAGE:m.ITEM_PER_PAGE,PAGE_PER_SECTION:m.PAGE_PER_SECTION},{onChangePage:m.onChangePage}),null,16,["list","onChangePage"])):(0,o.Q3)("",!0)])),(0,o.bF)(I,{modelValue:m.isModalVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>m.isModalVisible=e),userId:m.userId,nick:m.nick,role:m.role,chatroomId:m.chatroomId},null,8,["modelValue","userId","nick","role","chatroomId"])])}a(4114);var v=a(144),p=a(4373),C=a(8436),I=a(3537),_={components:{ChatModal:C.A,Pagination:I.A},setup(){const e=(0,v.KR)(localStorage.getItem("adminId")),t=(0,v.KR)(localStorage.getItem("adminNick")),a=(0,v.KR)("ADM"),l=(0,v.KR)(!1),n=(0,v.KR)(""),s=(0,v.KR)([]);let c=null;const i=(0,v.KR)(20),r=(0,v.KR)(10);let d=(0,v.KR)(1);const u=(0,o.EW)((()=>(d.value-1)*i.value)),k=e=>{d.value=e},h=e=>{n.value=e,l.value=!0},g=async()=>{try{const e=await p.A.post("/api/admin/chat/liveChatWaitingList",{});s.value=e.data}catch(e){console.error("Error fetching chat list:",e)}},E=()=>{let e=`ws://localhost:9090/ws/adminOnList?role=adm&nick=${t.value}`;c=new WebSocket(e),c.onopen=()=>{console.log("activeAdminChkSocket connection opened")},c.onmessage=e=>{console.log("activeAdminChkSocket got message"),s.value=[];let t=JSON.parse(e.data);t.forEach((e=>{let t={_id:e._id,participants:e.participants,credt:e.credt,status:e.status};s.value.push(t)}))},c.onclose=()=>{console.log("activeAdminChkSocket connection closed")},c.onerror=e=>{console.error("activeAdminChkSocket error:",e)}};return(0,o.sV)((()=>{E(),g()})),(0,o.hi)((()=>{c&&c.close()})),{userId:e,nick:t,role:a,chatrooms:s,chatroomId:n,isModalVisible:l,openChatModal:h,ITEM_PER_PAGE:i,PAGE_PER_SECTION:r,pageStartIdx:u,onChangePage:k}}},P=a(1241);const A=(0,P.A)(_,[["render",m]]);var R=A}}]);
//# sourceMappingURL=206.a15816bb.js.map